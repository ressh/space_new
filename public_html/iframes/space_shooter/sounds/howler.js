/*!
 *  howler.js v1.1.25
 *  howlerjs.com
 *
 *  (c) 2013-2014, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){var e={},t=null,n=!0,r=!1;try{typeof AudioContext!="undefined"?t=new AudioContext:typeof webkitAudioContext!="undefined"?t=new webkitAudioContext:n=!1}catch(i){n=!1}if(!n)if(typeof Audio!="undefined")try{new Audio}catch(i){r=!0}else r=!0;if(n){var s=typeof t.createGain=="undefined"?t.createGainNode():t.createGain();s.gain.value=1;s.connect(t.destination)}var o=function(e){this._volume=1;this._muted=!1;this.usingWebAudio=n;this.ctx=t;this.noAudio=r;this._howls=[];this._codecs=e;this.iOSAutoEnable=!0};o.prototype={volume:function(e){var t=this;e=parseFloat(e);if(e>=0&&e<=1){t._volume=e;n&&(s.gain.value=e);for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var i=0;i<t._howls[r]._audioNode.length;i++)t._howls[r]._audioNode[i].volume=t._howls[r]._volume*t._volume;return t}return n?s.gain.value:t._volume},mute:function(){this._setMuted(!0);return this},unmute:function(){this._setMuted(!1);return this},_setMuted:function(e){var t=this;t._muted=e;n&&(s.gain.value=e?0:t._volume);for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var i=0;i<t._howls[r]._audioNode.length;i++)t._howls[r]._audioNode[i].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(t&&(e._iOSEnabled||!/iPhone|iPad|iPod/i.test(navigator.userAgent)))return;e._iOSEnabled=!1;var n=function(){var r=t.createBuffer(1,1,22050),i=t.createBufferSource();i.buffer=r;i.connect(t.destination);typeof i.start=="undefined"?i.noteOn(0):i.start(0);setTimeout(function(){if(i.playbackState===i.PLAYING_STATE||i.playbackState===i.FINISHED_STATE){e._iOSEnabled=!0;e.iOSAutoEnable=!1;window.removeEventListener("touchstart",n,!1)}},0)};window.addEventListener("touchstart",n,!1);return e}};var u=null,a={};if(!r){u=new Audio;a={mp3:!!u.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!u.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var f=new o(a),l=function(e){var r=this;r._autoplay=e.autoplay||!1;r._buffer=e.buffer||!1;r._duration=e.duration||0;r._format=e.format||null;r._loop=e.loop||!1;r._loaded=!1;r._sprite=e.sprite||{};r._src=e.src||"";r._pos3d=e.pos3d||[0,0,-0.5];r._volume=e.volume!==undefined?e.volume:1;r._urls=e.urls||[];r._rate=e.rate||1;r._model=e.model||null;r._onload=[e.onload||function(){}];r._onloaderror=[e.onloaderror||function(){}];r._onend=[e.onend||function(){}];r._onpause=[e.onpause||function(){}];r._onplay=[e.onplay||function(){}];r._onendTimer=[];r._webAudio=n&&!r._buffer;r._audioNode=[];r._webAudio&&r._setupAudioNode();typeof t!="undefined"&&t&&f.iOSAutoEnable&&f._enableiOSAudio();f._howls.push(r);r.load()};l.prototype={load:function(){var e=this,t=null;if(r){e.on("loaderror");return}for(var n=0;n<e._urls.length;n++){var i,s;if(e._format)i=e._format;else{s=e._urls[n];i=/^data:audio\/([^;,]+);/i.exec(s);i||(i=/\.([^.]+)$/.exec(s.split("?",1)[0]));if(!i){e.on("loaderror");return}i=i[1].toLowerCase()}if(a[i]){t=e._urls[n];break}}if(!t){e.on("loaderror");return}e._src=t;if(e._webAudio)c(e,t);else{var u=new Audio;u.addEventListener("error",function(){u.error&&u.error.code===4&&(o.noAudio=!0);e.on("loaderror",{type:u.error?u.error.code:0})},!1);e._audioNode.push(u);u.src=t;u._pos=0;u.preload="auto";u.volume=f._muted?0:e._volume*f.volume();var l=function(){e._duration=Math.ceil(u.duration*10)/10;Object.getOwnPropertyNames(e._sprite).length===0&&(e._sprite={_default:[0,e._duration*1e3]});if(!e._loaded){e._loaded=!0;e.on("load")}e._autoplay&&e.play();u.removeEventListener("canplaythrough",l,!1)};u.addEventListener("canplaythrough",l,!1);u.load()}return e},urls:function(e){var t=this;if(e){t.stop();t._urls=typeof e=="string"?[e]:e;t._loaded=!1;t.load();return t}return t._urls},play:function(e,n){var r=this;typeof e=="function"&&(n=e);if(!e||typeof e=="function")e="_default";if(!r._loaded){r.on("load",function(){r.play(e,n)});return r}if(!r._sprite[e]){typeof n=="function"&&n();return r}r._inactiveNode(function(i){i._sprite=e;var s=i._pos>0?i._pos:r._sprite[e][0]/1e3,o=0;if(r._webAudio){o=r._sprite[e][1]/1e3-i._pos;i._pos>0&&(s=r._sprite[e][0]/1e3+s)}else o=r._sprite[e][1]/1e3-(s-r._sprite[e][0]/1e3);var u=!!r._loop||!!r._sprite[e][2],a=typeof n=="string"?n:Math.round(Date.now()*Math.random())+"",l;(function(){var t={id:a,sprite:e,loop:u};l=setTimeout(function(){!r._webAudio&&u&&r.stop(t.id).play(e,t.id);if(r._webAudio&&!u){r._nodeById(t.id).paused=!0;r._nodeById(t.id)._pos=0;r._clearEndTimer(t.id)}!r._webAudio&&!u&&r.stop(t.id);r.on("end",a)},o*1e3);r._onendTimer.push({timer:l,id:t.id})})();if(r._webAudio){var c=r._sprite[e][0]/1e3,h=r._sprite[e][1]/1e3;i.id=a;i.paused=!1;d(r,[u,c,h],a);r._playStart=t.currentTime;i.gain.value=r._volume;typeof i.bufferSource.start=="undefined"?i.bufferSource.noteGrainOn(0,s,o):i.bufferSource.start(0,s,o)}else{if(!(i.readyState===4||!i.readyState&&navigator.isCocoonJS)){r._clearEndTimer(a);(function(){var t=r,s=e,o=n,u=i,a=function(){t.play(s,o);u.removeEventListener("canplaythrough",a,!1)};u.addEventListener("canplaythrough",a,!1)})();return r}i.readyState=4;i.id=a;i.currentTime=s;i.muted=f._muted||i.muted;i.volume=r._volume*f.volume();setTimeout(function(){i.play()},0)}r.on("play");typeof n=="function"&&n(a);return r});return r},pause:function(e){var t=this;if(!t._loaded){t.on("play",function(){t.pause(e)});return t}t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n){n._pos=t.pos(null,e);if(t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0;typeof n.bufferSource.stop=="undefined"?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause()}t.on("pause");return t},stop:function(e){var t=this;if(!t._loaded){t.on("play",function(){t.stop(e)});return t}t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n){n._pos=0;if(t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0;typeof n.bufferSource.stop=="undefined"?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else if(!isNaN(n.duration)){n.pause();n.currentTime=0}}return t},mute:function(e){var t=this;if(!t._loaded){t.on("play",function(){t.mute(e)});return t}var n=e?t._nodeById(e):t._activeNode();n&&(t._webAudio?n.gain.value=0:n.muted=!0);return t},unmute:function(e){var t=this;if(!t._loaded){t.on("play",function(){t.unmute(e)});return t}var n=e?t._nodeById(e):t._activeNode();n&&(t._webAudio?n.gain.value=t._volume:n.muted=!1);return t},volume:function(e,t){var n=this;e=parseFloat(e);if(e>=0&&e<=1){n._volume=e;if(!n._loaded){n.on("play",function(){n.volume(e,t)});return n}var r=t?n._nodeById(t):n._activeNode();r&&(n._webAudio?r.gain.value=e:r.volume=e*f.volume());return n}return n._volume},loop:function(e){var t=this;if(typeof e=="boolean"){t._loop=e;return t}return t._loop},sprite:function(e){var t=this;if(typeof e=="object"){t._sprite=e;return t}return t._sprite},pos:function(e,n){var r=this;if(!r._loaded){r.on("load",function(){r.pos(e)});return typeof e=="number"?r:r._pos||0}e=parseFloat(e);var i=n?r._nodeById(n):r._activeNode();if(i){if(e>=0){r.pause(n);i._pos=e;r.play(i._sprite,n);return r}return r._webAudio?i._pos+(t.currentTime-r._playStart):i.currentTime}if(e>=0)return r;for(var s=0;s<r._audioNode.length;s++)if(r._audioNode[s].paused&&r._audioNode[s].readyState===4)return r._webAudio?r._audioNode[s]._pos:r._audioNode[s].currentTime},pos3d:function(e,t,n,r){var i=this;t=typeof t=="undefined"||!t?0:t;n=typeof n=="undefined"||!n?-0.5:n;if(!i._loaded){i.on("play",function(){i.pos3d(e,t,n,r)});return i}if(e>=0||e<0){if(i._webAudio){var s=r?i._nodeById(r):i._activeNode();if(s){i._pos3d=[e,t,n];s.panner.setPosition(e,t,n);s.panner.panningModel=i._model||"HRTF"}}return i}return i._pos3d},fade:function(e,t,n,r,i){var s=this,o=Math.abs(e-t),u=e>t?"down":"up",a=o/.01,f=n/a;if(!s._loaded){s.on("load",function(){s.fade(e,t,n,r,i)});return s}s.volume(e,i);for(var l=1;l<=a;l++)(function(){var e=s._volume+(u==="up"?.01:-0.01)*l,n=Math.round(1e3*e)/1e3,o=t;setTimeout(function(){s.volume(n,i);n===o&&r&&r()},f*l)})()},fadeIn:function(e,t,n){return this.volume(0).play().fade(0,e,t,n)},fadeOut:function(e,t,n,r){var i=this;return i.fade(i._volume,e,t,function(){n&&n();i.pause(r);i.on("end")},r)},_nodeById:function(e){var t=this,n=t._audioNode[0];for(var r=0;r<t._audioNode.length;r++)if(t._audioNode[r].id===e){n=t._audioNode[r];break}return n},_activeNode:function(){var e=this,t=null;for(var n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){t=e._audioNode[n];break}e._drainPool();return t},_inactiveNode:function(e){var t=this,n=null;for(var r=0;r<t._audioNode.length;r++)if(t._audioNode[r].paused&&t._audioNode[r].readyState===4){e(t._audioNode[r]);n=!0;break}t._drainPool();if(n)return;var i;if(t._webAudio){i=t._setupAudioNode();e(i)}else{t.load();i=t._audioNode[t._audioNode.length-1];var s=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",o=function(){i.removeEventListener(s,o,!1);e(i)};i.addEventListener(s,o,!1)}},_drainPool:function(){var e=this,t=0,n;for(n=0;n<e._audioNode.length;n++)e._audioNode[n].paused&&t++;for(n=e._audioNode.length-1;n>=0;n--){if(t<=5)break;if(e._audioNode[n].paused){e._webAudio&&e._audioNode[n].disconnect(0);t--;e._audioNode.splice(n,1)}}},_clearEndTimer:function(e){var t=this,n=0;for(var r=0;r<t._onendTimer.length;r++)if(t._onendTimer[r].id===e){n=r;break}var i=t._onendTimer[n];if(i){clearTimeout(i.timer);t._onendTimer.splice(n,1)}},_setupAudioNode:function(){var e=this,n=e._audioNode,r=e._audioNode.length;n[r]=typeof t.createGain=="undefined"?t.createGainNode():t.createGain();n[r].gain.value=e._volume;n[r].paused=!0;n[r]._pos=0;n[r].readyState=4;n[r].connect(s);n[r].panner=t.createPanner();n[r].panner.panningModel=e._model||"equalpower";n[r].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]);n[r].panner.connect(n[r]);return n[r]},on:function(e,t){var n=this,r=n["_on"+e];if(typeof t=="function")r.push(t);else for(var i=0;i<r.length;i++)t?r[i].call(n,t):r[i].call(n);return n},off:function(e,t){var n=this,r=n["_on"+e],i=t?t.toString():null;if(i){for(var s=0;s<r.length;s++)if(i===r[s].toString()){r.splice(s,1);break}}else n["_on"+e]=[];return n},unload:function(){var t=this,n=t._audioNode;for(var r=0;r<t._audioNode.length;r++){if(!n[r].paused){t.stop(n[r].id);t.on("end",n[r].id)}t._webAudio?n[r].disconnect(0):n[r].src=""}for(r=0;r<t._onendTimer.length;r++)clearTimeout(t._onendTimer[r].timer);var i=f._howls.indexOf(t);i!==null&&i>=0&&f._howls.splice(i,1);delete e[t._src];t=null}};if(n)var c=function(t,n){if(n in e){t._duration=e[n].duration;p(t);return}if(/^data:[^;]+;base64,/.test(n)){var r=atob(n.split(",")[1]),i=new Uint8Array(r.length);for(var s=0;s<r.length;++s)i[s]=r.charCodeAt(s);h(i.buffer,t,n)}else{var o=new XMLHttpRequest;o.open("GET",n,!0);o.responseType="arraybuffer";o.onload=function(){h(o.response,t,n)};o.onerror=function(){if(t._webAudio){t._buffer=!0;t._webAudio=!1;t._audioNode=[];delete t._gainNode;delete e[n];t.load()}};try{o.send()}catch(u){o.onerror()}}},h=function(n,r,i){t.decodeAudioData(n,function(t){if(t){e[i]=t;p(r,t)}},function(e){r.on("loaderror")})},p=function(e,t){e._duration=t?t.duration:e._duration;Object.getOwnPropertyNames(e._sprite).length===0&&(e._sprite={_default:[0,e._duration*1e3]});if(!e._loaded){e._loaded=!0;e.on("load")}e._autoplay&&e.play()},d=function(n,r,i){var s=n._nodeById(i);s.bufferSource=t.createBufferSource();s.bufferSource.buffer=e[n._src];s.bufferSource.connect(s.panner);s.bufferSource.loop=r[0];if(r[0]){s.bufferSource.loopStart=r[1];s.bufferSource.loopEnd=r[1]+r[2]}s.bufferSource.playbackRate.value=n._rate};typeof define=="function"&&define.amd&&define(function(){return{Howler:f,Howl:l}});if(typeof exports!="undefined"){exports.Howler=f;exports.Howl=l}if(typeof window!="undefined"){window.Howler=f;window.Howl=l}})();